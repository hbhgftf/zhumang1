{"version":3,"file":"detail.js","sources":["pages/policy/detail.vue","E:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcG9saWN5L2RldGFpbC52dWU"],"sourcesContent":["<template>\r\n  <view class=\"container\">\r\n    <!-- 顶部导航栏 -->\r\n    <view class=\"header\">\r\n      <view class=\"back-btn\" @click=\"goBack\">\r\n        <text class=\"back-icon\">←</text>\r\n      </view>\r\n      <text class=\"title\">政策详情</text>\r\n    </view>\r\n\r\n    <!-- 政策内容 -->\r\n    <view class=\"content\" v-if=\"policy\">\r\n      <image \r\n        v-if=\"policy.cover\" \r\n        :src=\"policy.cover\" \r\n        mode=\"widthFix\" \r\n        class=\"cover-image\"\r\n      />\r\n      \r\n      <view class=\"policy-header\">\r\n        <text class=\"policy-title\">{{ policy.title }}</text>\r\n        <view class=\"meta-info\">\r\n          <text class=\"publish-date\">发布时间：{{ formatDate(policy.publishDate) }}</text>\r\n          <text class=\"views\">阅读量：{{ formatViews(policy.views) }}</text>\r\n        </view>\r\n        <view class=\"tags\" v-if=\"policy.tags && policy.tags.length\">\r\n          <text \r\n            v-for=\"(tag, index) in policy.tags\" \r\n            :key=\"index\"\r\n            class=\"tag\"\r\n          >{{ tag }}</text>\r\n        </view>\r\n      </view>\r\n\r\n      <view class=\"policy-content\">\r\n        <rich-text :nodes=\"policy.content\"></rich-text>\r\n      </view>\r\n    </view>\r\n\r\n    <!-- 加载状态 -->\r\n    <view v-if=\"loading\" class=\"loading\">\r\n      <image src=\"/static/loading.gif\" mode=\"widthFix\" class=\"loading-icon\" />\r\n      <text>加载中...</text>\r\n    </view>\r\n\r\n    <!-- 错误状态 -->\r\n    <view v-if=\"error\" class=\"error-container\">\r\n      <image src=\"/static/error.png\" mode=\"widthFix\" class=\"error-icon\" />\r\n      <text class=\"error-text\">加载失败，请检查网络</text>\r\n      <button class=\"retry-btn\" @click=\"loadPolicyDetail\">重试</button>\r\n    </view>\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      policy: null,\r\n      loading: true,\r\n      error: false\r\n    }\r\n  },\r\n\r\n  onLoad(options) {\r\n    if (options.id) {\r\n      this.loadPolicyDetail(options.id)\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    async loadPolicyDetail(id) {\r\n      this.loading = true\r\n      this.error = false\r\n\r\n      try {\r\n        const response = await uni.request({\r\n          url: `${this.$config.baseUrl}/policy/detail/${id}`\r\n        })\r\n\r\n        const { data } = response\r\n        if (data.code === 200) {\r\n          this.policy = data.data\r\n        }\r\n      } catch (err) {\r\n        this.error = true\r\n        console.error('Failed to load policy detail:', err)\r\n      } finally {\r\n        this.loading = false\r\n      }\r\n    },\r\n\r\n    goBack() {\r\n      uni.navigateBack()\r\n    },\r\n\r\n    formatDate(timestamp) {\r\n      const date = new Date(timestamp)\r\n      return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}-${String(date.getDate()).padStart(2, '0')}`\r\n    },\r\n\r\n    formatViews(views) {\r\n      return views > 10000 ? (views / 10000).toFixed(1) + 'w' : views\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.container {\r\n  min-height: 100vh;\r\n  background: #fff;\r\n}\r\n\r\n.header {\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 100;\r\n  background: #fff;\r\n  padding: 20rpx;\r\n  display: flex;\r\n  align-items: center;\r\n  border-bottom: 1rpx solid #eee;\r\n}\r\n\r\n.back-btn {\r\n  padding: 20rpx;\r\n  margin-right: 20rpx;\r\n}\r\n\r\n.back-icon {\r\n  font-size: 40rpx;\r\n  color: #333;\r\n}\r\n\r\n.title {\r\n  font-size: 36rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n}\r\n\r\n.content {\r\n  padding: 30rpx;\r\n}\r\n\r\n.cover-image {\r\n  width: 100%;\r\n  border-radius: 16rpx;\r\n  margin-bottom: 30rpx;\r\n}\r\n\r\n.policy-header {\r\n  margin-bottom: 40rpx;\r\n}\r\n\r\n.policy-title {\r\n  font-size: 40rpx;\r\n  font-weight: bold;\r\n  color: #333;\r\n  line-height: 1.4;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.meta-info {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  color: #999;\r\n  font-size: 28rpx;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.tags {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 16rpx;\r\n}\r\n\r\n.tag {\r\n  background: #FFE7BA;\r\n  color: #FA8C16;\r\n  padding: 8rpx 16rpx;\r\n  border-radius: 8rpx;\r\n  font-size: 24rpx;\r\n}\r\n\r\n.policy-content {\r\n  font-size: 32rpx;\r\n  line-height: 1.8;\r\n  color: #333;\r\n}\r\n\r\n.loading {\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 60rpx 0;\r\n}\r\n\r\n.loading-icon {\r\n  width: 40rpx;\r\n  height: 40rpx;\r\n  margin-right: 10rpx;\r\n}\r\n\r\n.error-container {\r\n  text-align: center;\r\n  padding: 60rpx 0;\r\n}\r\n\r\n.error-icon {\r\n  width: 160rpx;\r\n  height: 160rpx;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.error-text {\r\n  color: #666;\r\n  font-size: 28rpx;\r\n  margin-bottom: 20rpx;\r\n}\r\n\r\n.retry-btn {\r\n  background: #FA8C16;\r\n  color: #fff;\r\n  padding: 16rpx 40rpx;\r\n  border-radius: 8rpx;\r\n  font-size: 28rpx;\r\n}\r\n</style> ","import MiniProgramPage from 'D:/JAVAEE/myflies/uniapp-app/uniapp/pages/policy/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;;AAuDA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,QAAQ;AAAA,MACR,SAAS;AAAA,MACT,OAAO;AAAA,IACT;AAAA,EACD;AAAA,EAED,OAAO,SAAS;AACd,QAAI,QAAQ,IAAI;AACd,WAAK,iBAAiB,QAAQ,EAAE;AAAA,IAClC;AAAA,EACD;AAAA,EAED,SAAS;AAAA,IACP,MAAM,iBAAiB,IAAI;AACzB,WAAK,UAAU;AACf,WAAK,QAAQ;AAEb,UAAI;AACF,cAAM,WAAW,MAAMA,cAAG,MAAC,QAAQ;AAAA,UACjC,KAAK,GAAG,KAAK,QAAQ,OAAO,kBAAkB,EAAE;AAAA,SACjD;AAED,cAAM,EAAE,KAAK,IAAI;AACjB,YAAI,KAAK,SAAS,KAAK;AACrB,eAAK,SAAS,KAAK;AAAA,QACrB;AAAA,MACA,SAAO,KAAK;AACZ,aAAK,QAAQ;AACbA,sBAAAA,sDAAc,iCAAiC,GAAG;AAAA,MACpD,UAAU;AACR,aAAK,UAAU;AAAA,MACjB;AAAA,IACD;AAAA,IAED,SAAS;AACPA,oBAAAA,MAAI,aAAa;AAAA,IAClB;AAAA,IAED,WAAW,WAAW;AACpB,YAAM,OAAO,IAAI,KAAK,SAAS;AAC/B,aAAO,GAAG,KAAK,YAAW,CAAE,IAAI,OAAO,KAAK,SAAQ,IAAK,CAAC,EAAE,SAAS,GAAG,GAAG,CAAC,IAAI,OAAO,KAAK,SAAS,EAAE,SAAS,GAAG,GAAG,CAAC;AAAA,IACxH;AAAA,IAED,YAAY,OAAO;AACjB,aAAO,QAAQ,OAAS,QAAQ,KAAO,QAAQ,CAAC,IAAI,MAAM;AAAA,IAC5D;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACxGA,GAAG,WAAW,eAAe;"}