{"version":3,"file":"emoji-picker-dialog.js","sources":["pages-ai-desk/ai-desk-customer-uniapp/components/CustomerServiceChat/message-input-toolbar/emoji-picker/emoji-picker-dialog.vue","E:/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDovSkFWQUVFL215ZmxpZXMvdW5pYXBwLWFwcC91bmlhcHAvcGFnZXMtYWktZGVzay9haS1kZXNrLWN1c3RvbWVyLXVuaWFwcC9jb21wb25lbnRzL0N1c3RvbWVyU2VydmljZUNoYXQvbWVzc2FnZS1pbnB1dC10b29sYmFyL2Vtb2ppLXBpY2tlci9lbW9qaS1waWNrZXItZGlhbG9nLnZ1ZQ"],"sourcesContent":["<template>\n  <div\n    ref=\"emojiPickerDialog\"\n    :class=\"{\n      'emoji-picker': true,\n      'emoji-picker-h5':true,\n    }\"\n  >\n    <ul\n      ref=\"emojiPickerListRef\"\n      :class=\"['emoji-picker-list','emoji-picker-h5-list']\"\n    >\n      <li\n        v-for=\"(childrenItem, childrenIndex) in currentEmojiList\"\n        :key=\"childrenIndex\"\n        class=\"emoji-picker-list-item\"\n        @click=\"select(childrenItem, childrenIndex)\"\n      >\n        <img\n          v-if=\"currentTabItem.type === EMOJI_TYPE.BASIC\"\n          class=\"emoji\"\n          :src=\"currentTabItem.url + BASIC_EMOJI_URL_MAPPING[childrenItem]\"\n        >\n        <img\n          v-else-if=\"currentTabItem.type === EMOJI_TYPE.BIG\"\n          class=\"emoji-big\"\n          :src=\"currentTabItem.url + childrenItem + '@2x.png'\"\n        >\n        <img\n          v-else\n          class=\"emoji-custom emoji-big\"\n          :src=\"currentTabItem.url + childrenItem\"\n        >\n      </li>\n    </ul>\n    <ul class=\"emoji-picker-tab\">\n      <li\n        v-for=\"(item, index) in list\"\n        :key=\"index\"\n        class=\"emoji-picker-tab-item\"\n        @click=\"toggleEmojiTab(index)\"\n      >\n        <Icon\n          v-if=\"item.type === EMOJI_TYPE.BASIC\"\n          class=\"icon\"\n          :file=\"faceIcon\"\n        />\n        <img\n          v-else-if=\"item.type === EMOJI_TYPE.BIG\"\n          class=\"icon-big\"\n          :src=\"item.url + item.list[0] + '@2x.png'\"\n        >\n        <img\n          v-else\n          class=\"icon-custom icon-big\"\n          :src=\"item.url + item.list[0]\"\n        >\n      </li>\n      <li\n        v-if=\"isUniFrameWork || isH5\"\n        class=\"send-btn\"\n        @click=\"sendMessage\"\n      >\n        {{ TUITranslateService.t(\"发送\") }}\n      </li>\n    </ul>\n  </div>\n</template>\n<script lang=\"ts\" setup>\nimport vue from '../../../../adapter-vue';\nimport {\n  TUIChatService,\n  TUIStore,\n  StoreName,\n  IConversationModel,\n  SendMessageParams,\n  TUITranslateService,\n} from '@tencentcloud/chat-uikit-engine';\nimport Icon from '../../../common/Icon.vue';\nimport faceIcon from '../../../../assets/face.png';\nimport { EMOJI_TYPE } from '.././../../../constant';\nimport { isUniFrameWork,isH5 } from '../../../../utils/env';\nimport { IEmojiGroupList, IEmojiGroup } from '../../../../interface';\nimport { isEnabledMessageReadReceiptGlobal } from '../../../../utils/utils';\nimport {\n  EMOJI_GROUP_LIST,\n  BASIC_EMOJI_URL_MAPPING,\n  convertKeyToEmojiName,\n} from '../../emoji-config';\nconst { ref, onMounted, onUnmounted } = vue;\n\nconst emits = defineEmits(['insertEmoji', 'onClose', 'sendMessage']);\nconst currentTabIndex = ref<number>(0);\nconst currentConversation = ref();\nconst emojiPickerDialog = ref();\nconst emojiPickerListRef = ref();\nconst list = ref<IEmojiGroupList>(initEmojiList());\nconst currentTabItem = ref<IEmojiGroup>(list?.value[0]);\nconst currentEmojiList = ref<string[]>(list?.value[0]?.list);\n\nonMounted(() => {\n  TUIStore.watch(StoreName.CONV, {\n    currentConversation: onCurrentConversationUpdate,\n  });\n});\n\nonUnmounted(() => {\n  TUIStore.unwatch(StoreName.CONV, {\n    currentConversation: onCurrentConversationUpdate,\n  });\n});\n\nconst toggleEmojiTab = (index: number) => {\n  currentTabIndex.value = index;\n  currentTabItem.value = list?.value[index];\n  currentEmojiList.value = list?.value[index]?.list;\n};\n\nconst select = (item: any, index: number) => {\n  const options: any = {\n    emoji: { key: item, name: convertKeyToEmojiName(item) },\n    type: currentTabItem?.value?.type,\n  };\n  switch (currentTabItem?.value?.type) {\n    case EMOJI_TYPE.BASIC:\n      options.url = currentTabItem?.value?.url + BASIC_EMOJI_URL_MAPPING[item];\n        uni.$emit('insert-emoji', options);\n      break;\n    case EMOJI_TYPE.BIG:\n      sendFaceMessage(index, currentTabItem.value);\n      break;\n    case EMOJI_TYPE.CUSTOM:\n      sendFaceMessage(index, currentTabItem.value);\n      break;\n    default:\n      break;\n  }\n};\n\nconst sendFaceMessage = (index: number, listItem: IEmojiGroup) => {\n  const options = {\n    to:\n      currentConversation?.value?.groupProfile?.groupID\n      || currentConversation?.value?.userProfile?.userID,\n    conversationType: currentConversation?.value?.type,\n    payload: {\n      index: listItem.emojiGroupID,\n      data: listItem.list[index],\n    },\n    needReadReceipt: isEnabledMessageReadReceiptGlobal(),\n  } as SendMessageParams;\n  TUIChatService.sendFaceMessage(options);\n};\n\nfunction sendMessage() {\n  uni.$emit('send-message-in-emoji-picker');\n}\n\nfunction onCurrentConversationUpdate(conversation: IConversationModel) {\n  currentConversation.value = conversation;\n}\n\nfunction initEmojiList() {\n  return EMOJI_GROUP_LIST;\n}\n</script>\n\n<style lang=\"scss\" scoped src=\"./style/index.scss\"></style>\n","import Component from 'D:/JAVAEE/myflies/uniapp-app/uniapp/pages-ai-desk/ai-desk-customer-uniapp/components/CustomerServiceChat/message-input-toolbar/emoji-picker/emoji-picker-dialog.vue'\nwx.createComponent(Component)"],"names":["vue","TUIStore","StoreName","_a","convertKeyToEmojiName","EMOJI_TYPE","BASIC_EMOJI_URL_MAPPING","uni","isEnabledMessageReadReceiptGlobal","TUIChatService","EMOJI_GROUP_LIST"],"mappings":";;;;;;;;;;;AA8EA,MAAA,OAAiB,MAAA;;;;;;AAWjB,UAAM,EAAE,KAAK,WAAW,YAAA,IAAgBA,4CAAAA;AAGlC,UAAA,kBAAkB,IAAY,CAAC;AACrC,UAAM,sBAAsB;AACF,QAAI;AACH,QAAI;AACzB,UAAA,OAAO,IAAqB,cAAA,CAAe;AACjD,UAAM,iBAAiB,IAAiB,6BAAM,MAAM,EAAE;AACtD,UAAM,mBAAmB,KAAc,kCAAM,MAAM,OAAZ,mBAAgB,IAAI;AAE3D,cAAU,MAAM;AACLC,uBAAA,MAAMC,kBAAU,MAAM;AAAA,QAC7B,qBAAqB;AAAA,MAAA,CACtB;AAAA,IAAA,CACF;AAED,gBAAY,MAAM;AACPD,uBAAA,QAAQC,kBAAU,MAAM;AAAA,QAC/B,qBAAqB;AAAA,MAAA,CACtB;AAAA,IAAA,CACF;AAEK,UAAA,iBAAiB,CAAC,UAAkB;;AACxC,sBAAgB,QAAQ;AACT,qBAAA,QAAQ,6BAAM,MAAM;AACnC,uBAAiB,SAAQC,MAAA,6BAAM,MAAM,WAAZ,gBAAAA,IAAoB;AAAA,IAAA;AAGzC,UAAA,SAAS,CAAC,MAAW,UAAkB;;AAC3C,YAAM,UAAe;AAAA,QACnB,OAAO,EAAE,KAAK,MAAM,MAAMC,kFAAAA,sBAAsB,IAAI,EAAE;AAAA,QACtD,OAAMD,MAAA,iDAAgB,UAAhB,gBAAAA,IAAuB;AAAA,MAAA;AAEvB,eAAA,sDAAgB,UAAhB,mBAAuB,MAAM;AAAA,QACnC,KAAKE,0CAAW,WAAA;AACd,kBAAQ,QAAM,sDAAgB,UAAhB,mBAAuB,OAAMC,kFAAAA,wBAAwB,IAAI;AACjEC,wBAAAA,MAAA,MAAM,gBAAgB,OAAO;AACnC;AAAA,QACF,KAAKF,0CAAW,WAAA;AACE,0BAAA,OAAO,eAAe,KAAK;AAC3C;AAAA,QACF,KAAKA,0CAAW,WAAA;AACE,0BAAA,OAAO,eAAe,KAAK;AAC3C;AAAA,MAGJ;AAAA,IAAA;AAGI,UAAA,kBAAkB,CAAC,OAAe,aAA0B;;AAChE,YAAM,UAAU;AAAA,QACd,MACE,MAAAF,MAAA,2DAAqB,UAArB,gBAAAA,IAA4B,iBAA5B,mBAA0C,cACvC,sEAAqB,UAArB,mBAA4B,gBAA5B,mBAAyC;AAAA,QAC9C,mBAAkB,gEAAqB,UAArB,mBAA4B;AAAA,QAC9C,SAAS;AAAA,UACP,OAAO,SAAS;AAAA,UAChB,MAAM,SAAS,KAAK,KAAK;AAAA,QAC3B;AAAA,QACA,iBAAiBK,6CAAAA,kCAAkC;AAAA,MAAA;AAErDC,uBAAe,gBAAgB,OAAO;AAAA,IAAA;AAGxC,aAAS,cAAc;AACrBF,0BAAI,MAAM,8BAA8B;AAAA,IAC1C;AAEA,aAAS,4BAA4B,cAAkC;AACrE,0BAAoB,QAAQ;AAAA,IAC9B;AAEA,aAAS,gBAAgB;AAChB,aAAAG;IACT;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnKA,GAAG,gBAAgB,SAAS;"}