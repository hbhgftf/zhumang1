{"version":3,"file":"message-plugin-uniapp.js","sources":["pages-ai-desk/ai-desk-customer-uniapp/components/CustomerServiceChat/message-list/message-elements/message-desk/message-plugin-uniapp.vue","E:/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDovSkFWQUVFL215ZmxpZXMvdW5pYXBwLWFwcC91bmlhcHAvcGFnZXMtYWktZGVzay9haS1kZXNrLWN1c3RvbWVyLXVuaWFwcC9jb21wb25lbnRzL0N1c3RvbWVyU2VydmljZUNoYXQvbWVzc2FnZS1saXN0L21lc3NhZ2UtZWxlbWVudHMvbWVzc2FnZS1kZXNrL21lc3NhZ2UtcGx1Z2luLXVuaWFwcC52dWU"],"sourcesContent":["<template>\n  <MessagePluginLayout\n    :message=\"props.message\"\n    :showStyle=\"pluginMessageType.showStyle\"\n    :bubbleClassNameList=\"[\n      pluginMessageType.pluginType === 'room' ? 'message-bubble-room' : '',\n    ]\"\n    @resendMessage=\"resendMessage\"\n    @handleToggleMessageItem=\"handleToggleMessageItem\"\n    @handleH5LongPress=\"handleH5LongPress\"\n  >\n    <template #messageBubble>\n      <MessageCustomerService\n        v-if=\"pluginMessageType.pluginType === 'customer'\"\n        :message=\"props.message\"\n        @showFormPopup=\"handleShowFormPopup\"\n        @heightChanged=\"onHeightChanged\"\n      />\n    </template>\n  </MessagePluginLayout>\n</template>\n\n<script lang=\"ts\" setup>\nimport vue from '../../../../../adapter-vue';\nimport { IMessageModel, StoreName, TUIStore } from '@tencentcloud/chat-uikit-engine';\nimport { isCustomerServicePluginMessage, isCustomServiceMessageInvisible } from './message-desk-elements/index';\nimport MessagePluginLayout from './message-plugin-layout-uniapp.vue';\nimport MessageCustomerService from './message-desk-elements/message-desk.vue';\nimport { needHackForStreamText } from \"../../../../../utils/utils\";\nconst { computed } = vue;\n\ninterface IProps {\n  message: IMessageModel;\n  blinkMessageIDList?: string[];\n}\n\nconst props = withDefaults(defineProps<IProps>(), {\n  message: () => ({} as IMessageModel),\n  blinkMessageIDList: () => [] as string[],\n});\n\nconst emits = defineEmits([\n  'resendMessage',\n  'handleToggleMessageItem',\n  'handleH5LongPress',\n  'showFormPopup',\n  'heightChanged',\n]);\nconst messageModel = computed(() => TUIStore.getMessageModel(props.message.ID));\n\nconst pluginMessageType = computed<{ pluginType: string; showStyle: string }>(\n  () => {\n    // vue2->app 兼容逻辑\n    if (needHackForStreamText(messageModel.value.payload.data)) {\n      TUIStore.update(StoreName.CUSTOM, 'hackedMessageID', props.message.ID);\n    }\n\n    let typeObj = { pluginType: '', showStyle: '' };\n    if (isCustomerServicePluginMessage(messageModel.value)) {\n      typeObj = {\n        pluginType: 'customer',\n        showStyle: isCustomServiceMessageInvisible(messageModel.value as any)\n          ? ''\n          : 'bubble',\n      };\n    }\n    return typeObj;\n  },\n);\n\n// The following are for external interaction such as messageTool, no special processing is required, please do not touch\nconst resendMessage = (message: IMessageModel) => {\n  emits('resendMessage', message);\n};\nconst handleToggleMessageItem = (\n  e: any,\n  message: IMessageModel,\n  isLongpress = false,\n) => {\n  emits('handleToggleMessageItem', e, message, isLongpress);\n};\nconst handleH5LongPress = (e: any, message: IMessageModel, type: string) => {\n  emits('handleH5LongPress', e, message, type);\n};\nconst handleShowFormPopup = (data: boolean) => {\n  emits('showFormPopup', data);\n};\nconst onHeightChanged = () => {\n  emits('heightChanged');\n};\n</script>\n\n<style lang=\"scss\" scoped>\n/* stylelint-disable-next-line no-empty-source */\n</style>\n","import Component from 'D:/JAVAEE/myflies/uniapp-app/uniapp/pages-ai-desk/ai-desk-customer-uniapp/components/CustomerServiceChat/message-list/message-elements/message-desk/message-plugin-uniapp.vue'\nwx.createComponent(Component)"],"names":["vue","TUIStore","needHackForStreamText","StoreName","isCustomerServicePluginMessage","isCustomServiceMessageInvisible"],"mappings":";;;;;;;;;AA0BA,MAAA,sBAAgC,MAAA;AAChC,MAAA,yBAAmC,MAAA;;;;;;;;;;;;;;;AAE7B,UAAA,EAAE,SAAa,IAAAA;AAOrB,UAAM,QAAQ;AAKd,UAAM,QAAQ;AAOR,UAAA,eAAe,SAAS,MAAMC,cAAA,GAAS,gBAAgB,MAAM,QAAQ,EAAE,CAAC;AAE9E,UAAM,oBAAoB;AAAA,MACxB,MAAM;AAEJ,YAAIC,6CAAsB,sBAAA,aAAa,MAAM,QAAQ,IAAI,GAAG;AAC1DD,2BAAS,OAAOE,cAAAA,IAAU,QAAQ,mBAAmB,MAAM,QAAQ,EAAE;AAAA,QACvE;AAEA,YAAI,UAAU,EAAE,YAAY,IAAI,WAAW,GAAG;AAC1C,YAAAC,uCAAA,+BAA+B,aAAa,KAAK,GAAG;AAC5C,oBAAA;AAAA,YACR,YAAY;AAAA,YACZ,WAAWC,6CAAAA,mBAAgC,aAAa,KAAY,IAChE,KACA;AAAA,UAAA;AAAA,QAER;AACO,eAAA;AAAA,MACT;AAAA,IAAA;AAII,UAAA,gBAAgB,CAAC,YAA2B;AAChD,YAAM,iBAAiB,OAAO;AAAA,IAAA;AAEhC,UAAM,0BAA0B,CAC9B,GACA,SACA,cAAc,UACX;AACG,YAAA,2BAA2B,GAAG,SAAS,WAAW;AAAA,IAAA;AAE1D,UAAM,oBAAoB,CAAC,GAAQ,SAAwB,SAAiB;AACpE,YAAA,qBAAqB,GAAG,SAAS,IAAI;AAAA,IAAA;AAEvC,UAAA,sBAAsB,CAAC,SAAkB;AAC7C,YAAM,iBAAiB,IAAI;AAAA,IAAA;AAE7B,UAAM,kBAAkB,MAAM;AAC5B,YAAM,eAAe;AAAA,IAAA;;;;;;;;;;;;;;;;;;;;;;;;ACvFvB,GAAG,gBAAgB,SAAS;"}