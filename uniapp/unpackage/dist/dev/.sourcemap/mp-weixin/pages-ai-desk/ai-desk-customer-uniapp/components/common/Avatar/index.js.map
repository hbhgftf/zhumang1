{"version":3,"file":"index.js","sources":["pages-ai-desk/ai-desk-customer-uniapp/components/common/Avatar/index.vue","E:/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDovSkFWQUVFL215ZmxpZXMvdW5pYXBwLWFwcC91bmlhcHAvcGFnZXMtYWktZGVzay9haS1kZXNrLWN1c3RvbWVyLXVuaWFwcC9jb21wb25lbnRzL2NvbW1vbi9BdmF0YXIvaW5kZXgudnVl"],"sourcesContent":["<template>\n  <div\n    class=\"avatar-container\"\n    :style=\"{\n      width: avatarSize,\n      height: avatarSize,\n      borderRadius: avatarBorderRadius,\n    }\"\n  >\n    <template>\n      <image\n        v-if=\"!loadErrorInUniapp\"\n        class=\"avatar-image\"\n        :src=\"avatarImageUrl || defaultAvatarUrl\"\n        @load=\"avatarLoadSuccess\"\n        @error=\"avatarLoadFailed\"\n      />\n      <image\n        v-else\n        class=\"avatar-image\"\n        :src=\"defaultAvatarUrl\"\n        @load=\"avatarLoadSuccess\"\n        @error=\"avatarLoadFailed\"\n      />\n    </template>\n    <div\n      v-if=\"useAvatarSkeletonAnimation && !isImgLoaded\"\n      :class=\"{\n        placeholder: true,\n        hidden: isImgLoaded,\n        'skeleton-animation': useAvatarSkeletonAnimation,\n      }\"\n    />\n  </div>\n</template>\n\n<script setup lang=\"ts\">\nimport vue from '../../../adapter-vue';\nconst { ref, toRefs } = vue;\n\ninterface IProps {\n  url: string;\n  size?: string;\n  borderRadius?: string;\n  useSkeletonAnimation?: boolean;\n}\n\ninterface IEmits {\n  (key: 'onLoad', e: Event): void;\n  (key: 'onError', e: Event): void;\n}\n\nconst defaultAvatarUrl = ref(\n  'https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png',\n);\nconst emits = defineEmits<IEmits>();\nconst props = withDefaults(defineProps<IProps>(), {\n  // uniapp vue2 does not support constants in defineProps\n  url: 'https://web.sdk.qcloud.com/component/TUIKit/assets/avatar_21.png',\n  size: '36px',\n  borderRadius: '50%',\n  useSkeletonAnimation: false,\n});\n\nconst {\n  size: avatarSize,\n  url: avatarImageUrl,\n  borderRadius: avatarBorderRadius,\n  useSkeletonAnimation: useAvatarSkeletonAnimation,\n} = toRefs(props);\n\nlet reloadAvatarTime = 0;\nconst isImgLoaded = ref<boolean>(false);\nconst loadErrorInUniapp = ref<boolean>(false);\n\nfunction avatarLoadSuccess(e: Event) {\n  isImgLoaded.value = true;\n  emits('onLoad', e);\n}\n\nfunction avatarLoadFailed(e: Event) {\n  reloadAvatarTime += 1;\n  if (reloadAvatarTime > 3) {\n    return;\n  }\n  loadErrorInUniapp.value = true;\n  emits('onError', e);\n}\n</script>\n\n<style scoped lang=\"scss\">\n:not(not) {\n  display: flex;\n  flex-direction: column;\n  box-sizing: border-box;\n  min-width: 0;\n}\n\n.avatar-container {\n  position: relative;\n  justify-content: center;\n  align-items: center;\n  overflow: hidden;\n  flex: 0 0 auto;\n\n  .placeholder {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: #ececec;\n    transition: opacity 0.3s, background-color 0.1s ease-out;\n\n    &.skeleton-animation {\n      animation: breath 2s linear 0.3s infinite;\n    }\n\n    &.hidden {\n      opacity: 0;\n    }\n  }\n\n  .avatar-image {\n    width: 100%;\n    height: 100%;\n  }\n}\n\n@keyframes breath {\n  50% {\n    /* stylelint-disable-next-line scss/no-global-function-names */\n    background-color: darken(#ececec, 10%);\n  }\n}\n</style>\n","import Component from 'D:/JAVAEE/myflies/uniapp-app/uniapp/pages-ai-desk/ai-desk-customer-uniapp/components/common/Avatar/index.vue'\nwx.createComponent(Component)"],"names":["vue"],"mappings":";;;;;;;;;;;;;;;;;AAsCM,UAAA,EAAE,KAAK,OAAW,IAAAA;AAcxB,UAAM,mBAAmB;AAAA,MACvB;AAAA,IAAA;AAEF,UAAM,QAAQ;AACd,UAAM,QAAQ;AAQR,UAAA;AAAA,MACJ,MAAM;AAAA,MACN,KAAK;AAAA,MACL,cAAc;AAAA,MACd,sBAAsB;AAAA,IAAA,IACpB,OAAO,KAAK;AAEhB,QAAI,mBAAmB;AACjB,UAAA,cAAc,IAAa,KAAK;AAChC,UAAA,oBAAoB,IAAa,KAAK;AAE5C,aAAS,kBAAkB,GAAU;AACnC,kBAAY,QAAQ;AACpB,YAAM,UAAU,CAAC;AAAA,IACnB;AAEA,aAAS,iBAAiB,GAAU;AACd,0BAAA;AACpB,UAAI,mBAAmB,GAAG;AACxB;AAAA,MACF;AACA,wBAAkB,QAAQ;AAC1B,YAAM,WAAW,CAAC;AAAA,IACpB;;;;;;;;;;;;;;;;;;;;;;;;;;ACtFA,GAAG,gBAAgB,SAAS;"}