{"version":3,"file":"toolbar-button-end-human-service.js","sources":["pages-ai-desk/ai-desk-customer-uniapp/components/CustomerServiceChat/message-toolbar-button/toolbar-button-end-human-service.vue","E:/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDovSkFWQUVFL215ZmxpZXMvdW5pYXBwLWFwcC91bmlhcHAvcGFnZXMtYWktZGVzay9haS1kZXNrLWN1c3RvbWVyLXVuaWFwcC9jb21wb25lbnRzL0N1c3RvbWVyU2VydmljZUNoYXQvbWVzc2FnZS10b29sYmFyLWJ1dHRvbi90b29sYmFyLWJ1dHRvbi1lbmQtaHVtYW4tc2VydmljZS52dWU"],"sourcesContent":["<template>\n  <div :class=\"['toolbar-button', isH5 ? 'toolbar-button-h5' : '']\" @click=\"onClick\">\n    <Icon v-if=\"props.icon\" class=\"toolbar-button-icon\" :file=\"props.icon\" width=\"14px\" height=\"14px\"/>\n    <div class=\"toolbar-button-text\">\n      {{ props.title || TUITranslateService.t('AIDesk.结束人工会话') }}\n    </div>\n  </div>\n</template>\n<script lang=\"ts\" setup>\nimport { isH5 } from '../../../utils/env';\nimport Icon from '../../common/Icon.vue';\nimport { TUITranslateService, TUIChatService, IConversationModel, TUIStore, StoreName } from '@tencentcloud/chat-uikit-engine';\nimport { CUSTOM_MESSAGE_SRC } from '../../../constant';\nimport { isEnabledMessageReadReceiptGlobal, getTo } from '../../../utils/utils';\nimport vue from '../../../adapter-vue';\n\nconst { ref, onMounted, onUnmounted } = vue;\nconst currentConversation = ref<IConversationModel>();\ninterface IProps {\n  title?:string;\n  icon?:string | undefined;\n}\n\nconst props = withDefaults(defineProps<IProps>(), {\n  title: '',\n  icon: ''\n})\n\nonMounted(() => {\n  TUIStore.watch(StoreName.CONV, {\n    currentConversation: onCurrentConversationUpdate,\n  });\n});\n\nonUnmounted(() => {\n  TUIStore.unwatch(StoreName.CONV, {\n    currentConversation: onCurrentConversationUpdate,\n  });\n});\n\nconst onCurrentConversationUpdate = (conversation: IConversationModel) => {\n  currentConversation.value = conversation;\n};\n\nconst onClick = () => {\n  TUIChatService.sendCustomMessage({\n    to: getTo(currentConversation?.value),\n    conversationType: currentConversation?.value?.type,\n    payload: {\n      data: JSON.stringify({\n        customerServicePlugin: 0,\n        src: CUSTOM_MESSAGE_SRC.USER_END_SESSION,\n      }),\n    },\n    needReadReceipt: isEnabledMessageReadReceiptGlobal(),\n  },{ onlineUserOnly:true });\n}\n\n</script>\n<style lang=\"scss\" scoped src=\"./style/index.scss\"></style>\n","import Component from 'D:/JAVAEE/myflies/uniapp-app/uniapp/pages-ai-desk/ai-desk-customer-uniapp/components/CustomerServiceChat/message-toolbar-button/toolbar-button-end-human-service.vue'\nwx.createComponent(Component)"],"names":["vue","TUIStore","StoreName","TUIChatService","getTo","CUSTOM_MESSAGE_SRC","isEnabledMessageReadReceiptGlobal"],"mappings":";;;;;;;;;AAUA,MAAA,OAAiB,MAAA;;;;;;;;AAMjB,UAAM,EAAE,KAAK,WAAW,YAAA,IAAgBA,4CAAAA;AACxC,UAAM,sBAAsB;AAM5B,UAAM,QAAQ;AAKd,cAAU,MAAM;AACLC,uBAAA,MAAMC,kBAAU,MAAM;AAAA,QAC7B,qBAAqB;AAAA,MAAA,CACtB;AAAA,IAAA,CACF;AAED,gBAAY,MAAM;AACPD,uBAAA,QAAQC,kBAAU,MAAM;AAAA,QAC/B,qBAAqB;AAAA,MAAA,CACtB;AAAA,IAAA,CACF;AAEK,UAAA,8BAA8B,CAAC,iBAAqC;AACxE,0BAAoB,QAAQ;AAAA,IAAA;AAG9B,UAAM,UAAU,MAAM;;AACpBC,oBAAAA,GAAe,kBAAkB;AAAA,QAC/B,IAAIC,6CAAAA,MAAM,2DAAqB,KAAK;AAAA,QACpC,mBAAkB,gEAAqB,UAArB,mBAA4B;AAAA,QAC9C,SAAS;AAAA,UACP,MAAM,KAAK,UAAU;AAAA,YACnB,uBAAuB;AAAA,YACvB,KAAKC,0CAAmB,mBAAA;AAAA,UAAA,CACzB;AAAA,QACH;AAAA,QACA,iBAAiBC,6CAAAA,kCAAkC;AAAA,MAAA,GACnD,EAAE,gBAAe,KAAA,CAAM;AAAA,IAAA;;;;;;;;;;;;;;;;;;;ACtD3B,GAAG,gBAAgB,SAAS;"}