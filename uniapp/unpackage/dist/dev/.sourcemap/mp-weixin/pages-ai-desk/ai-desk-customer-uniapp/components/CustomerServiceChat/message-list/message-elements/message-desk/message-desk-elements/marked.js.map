{"version":3,"file":"marked.js","sources":["pages-ai-desk/ai-desk-customer-uniapp/components/CustomerServiceChat/message-list/message-elements/message-desk/message-desk-elements/marked.ts"],"sourcesContent":["import { marked } from './lib-marked';\n\nconst rendererMD = new marked.Renderer();\nrendererMD.image = (href, title, text) => {\n    return `\n        <img src=\"${href}\" alt=\"${text}\" style=\"max-width: 100%;\">\n    `;\n}\nrendererMD.link = (href, title, text) => {\n    // a 标签 href 如果异常（包含非 ASCII 字符），则当成普通文本处理\n    if (href && /[^\\x00-\\x7F]/g.test(href)) {\n        return text;\n    }\n    return `<a target=\"_blank\" rel=\"noreferrer noopenner\" class=\"message-marked_link\" href=\"${href || ''}\" title=\"${title}\">${text}</a>`;\n}\n\nmarked.setOptions({\n    gfm: true,\n    breaks: true,\n    pedantic: false,\n    sanitize: false,\n    smartLists: true,\n    smartypants: false,\n});\n\n// uni-app 的 jscore 版本比较低，不支持 Unicode 属性\n// marked 库v4.0起使用了 /\\p{L}\\p{N}/gu 等 Unicode 属性正则表达式，这些特性在 ES2018 引入，低版本 jscore 不支持，会报错\n// 使用传统的正则代替，以规避问题\n\n// uni-app android 不支持 marked v7.0.5 或更高版本（会白屏，uni-app ios 可以用，为了更好的兼容性，目前都用 marked v4.0）\nexport const parseMarkdown = (text: string) => {\n    return marked.parse(text, { renderer: rendererMD });\n};\n"],"names":["marked"],"mappings":";;AAEA,MAAM,aAAa,IAAIA,6IAAO;AAC9B,WAAW,QAAQ,CAAC,MAAM,OAAO,SAAS;AAC/B,SAAA;AAAA,oBACS,IAAI,UAAU,IAAI;AAAA;AAEtC;AACA,WAAW,OAAO,CAAC,MAAM,OAAO,SAAS;AAErC,MAAI,QAAQ,gBAAgB,KAAK,IAAI,GAAG;AAC7B,WAAA;AAAA,EACX;AACA,SAAO,mFAAmF,QAAQ,EAAE,YAAY,KAAK,KAAK,IAAI;AAClI;AAEAA,sIAAA,OAAO,WAAW;AAAA,EACd,KAAK;AAAA,EACL,QAAQ;AAAA,EACR,UAAU;AAAA,EACV,UAAU;AAAA,EACV,YAAY;AAAA,EACZ,aAAa;AACjB,CAAC;AAOY,MAAA,gBAAgB,CAAC,SAAiB;AAC3C,SAAOA,sIAAAA,OAAO,MAAM,MAAM,EAAE,UAAU,YAAY;AACtD;;"}