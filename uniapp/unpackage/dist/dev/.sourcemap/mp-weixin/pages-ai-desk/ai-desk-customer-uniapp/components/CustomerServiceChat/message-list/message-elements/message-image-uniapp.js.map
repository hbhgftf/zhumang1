{"version":3,"file":"message-image-uniapp.js","sources":["pages-ai-desk/ai-desk-customer-uniapp/components/CustomerServiceChat/message-list/message-elements/message-image-uniapp.vue","E:/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDovSkFWQUVFL215ZmxpZXMvdW5pYXBwLWFwcC91bmlhcHAvcGFnZXMtYWktZGVzay9haS1kZXNrLWN1c3RvbWVyLXVuaWFwcC9jb21wb25lbnRzL0N1c3RvbWVyU2VydmljZUNoYXQvbWVzc2FnZS1saXN0L21lc3NhZ2UtZWxlbWVudHMvbWVzc2FnZS1pbWFnZS11bmlhcHAudnVl"],"sourcesContent":["<template>\n  <div\n    class=\"image-container\"\n    @click=\"handleImagePreview\"\n  >\n    <image\n      class=\"message-image\"\n      mode=\"aspectFit\"\n      :src=\"props.content.url\"\n      :style=\"{ width: imageStyles.width, height: imageStyles.height }\"\n      @load=\"imageLoad\"\n    />\n  </div>\n</template>\n\n<script lang=\"ts\" setup>\nimport vue from '../../../../adapter-vue';\nimport type { IMessageModel } from '@tencentcloud/chat-uikit-engine';\nimport type { IImageMessageContent } from '../../../../interface';\nconst { watchEffect, ref } = vue;\n\ninterface IProps {\n  content: IImageMessageContent;\n  messageItem: IMessageModel;\n}\ninterface IEmit {\n  (key: 'previewImage'): void;\n}\n\nconst emits = defineEmits<IEmit>();\nconst props = withDefaults(defineProps<IProps>(), {\n  content: () => ({}),\n  messageItem: () => ({} as IMessageModel),\n});\n\nconst DEFAULT_MAX_SIZE = 155;\nconst imageStyles = ref({ width: 'auto', height: 'auto' });\n\nconst genImageStyles = (value: { width?: any; height?: any }) => {\n  const { width, height } = value;\n  if (width === 0 || height === 0) {\n    return;\n  }\n\n  let imageWidth = 0;\n  let imageHeight = 0;\n  if (width >= height) {\n    imageWidth = DEFAULT_MAX_SIZE;\n    imageHeight = (DEFAULT_MAX_SIZE * height) / width;\n  } else {\n    imageWidth = (DEFAULT_MAX_SIZE * width) / height;\n    imageHeight = DEFAULT_MAX_SIZE;\n  }\n  imageStyles.value.width = imageWidth + 'px';\n  imageStyles.value.height = imageHeight + 'px';\n};\n\nwatchEffect(() => {\n  genImageStyles(props.content);\n});\n\nconst imageLoad = (event: Event) => {\n  genImageStyles(event.detail);\n};\n\nconst handleImagePreview = () => {\n  if (\n    props.messageItem?.status === 'success'\n    || props.messageItem.progress === 1\n  ) {\n    emits('previewImage');\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.image-container {\n  position: relative;\n  background-color: #f4f4f4;\n  font-size: 0;\n\n  .message-image {\n    max-width: 150px;\n  }\n}\n</style>\n","import Component from 'D:/JAVAEE/myflies/uniapp-app/uniapp/pages-ai-desk/ai-desk-customer-uniapp/components/CustomerServiceChat/message-list/message-elements/message-image-uniapp.vue'\nwx.createComponent(Component)"],"names":["vue"],"mappings":";;;AAmCA,MAAM,mBAAmB;;;;;;;;;AAhBnB,UAAA,EAAE,aAAa,IAAQ,IAAAA;AAU7B,UAAM,QAAQ;AACd,UAAM,QAAQ;AAMd,UAAM,cAAc,IAAI,EAAE,OAAO,QAAQ,QAAQ,QAAQ;AAEnD,UAAA,iBAAiB,CAAC,UAAyC;AACzD,YAAA,EAAE,OAAO,OAAW,IAAA;AACtB,UAAA,UAAU,KAAK,WAAW,GAAG;AAC/B;AAAA,MACF;AAEA,UAAI,aAAa;AACjB,UAAI,cAAc;AAClB,UAAI,SAAS,QAAQ;AACN,qBAAA;AACb,sBAAe,mBAAmB,SAAU;AAAA,MAAA,OACvC;AACL,qBAAc,mBAAmB,QAAS;AAC5B,sBAAA;AAAA,MAChB;AACY,kBAAA,MAAM,QAAQ,aAAa;AAC3B,kBAAA,MAAM,SAAS,cAAc;AAAA,IAAA;AAG3C,gBAAY,MAAM;AAChB,qBAAe,MAAM,OAAO;AAAA,IAAA,CAC7B;AAEK,UAAA,YAAY,CAAC,UAAiB;AAClC,qBAAe,MAAM,MAAM;AAAA,IAAA;AAG7B,UAAM,qBAAqB,MAAM;;AAC/B,YACE,WAAM,gBAAN,mBAAmB,YAAW,aAC3B,MAAM,YAAY,aAAa,GAClC;AACA,cAAM,cAAc;AAAA,MACtB;AAAA,IAAA;;;;;;;;;;;;;ACtEF,GAAG,gBAAgB,SAAS;"}