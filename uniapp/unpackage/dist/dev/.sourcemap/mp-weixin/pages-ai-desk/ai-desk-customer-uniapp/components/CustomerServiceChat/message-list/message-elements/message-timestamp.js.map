{"version":3,"file":"message-timestamp.js","sources":["pages-ai-desk/ai-desk-customer-uniapp/components/CustomerServiceChat/message-list/message-elements/message-timestamp.vue","E:/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDovSkFWQUVFL215ZmxpZXMvdW5pYXBwLWFwcC91bmlhcHAvcGFnZXMtYWktZGVzay9haS1kZXNrLWN1c3RvbWVyLXVuaWFwcC9jb21wb25lbnRzL0N1c3RvbWVyU2VydmljZUNoYXQvbWVzc2FnZS1saXN0L21lc3NhZ2UtZWxlbWVudHMvbWVzc2FnZS10aW1lc3RhbXAudnVl"],"sourcesContent":["<template>\n  <div\n    v-if=\"timestampShowFlag\"\n    class=\"message-timestamp\"\n  >\n    {{ timestampShowContent }}\n  </div>\n</template>\n<script setup lang=\"ts\">\nimport vue from '../../../../adapter-vue';\nimport { calculateTimestamp } from '../../../../utils/utils';\nconst { toRefs, ref, watch } = vue;\n\nconst props = defineProps({\n  currTime: {\n    type: Number,\n    default: 0,\n  },\n  prevTime: {\n    type: Number,\n    default: 0,\n  },\n});\nconst { currTime, prevTime } = toRefs(props);\nconst timestampShowFlag = ref(false);\nconst timestampShowContent = ref('');\n\nconst handleItemTime = (currTime: number, prevTime: number) => {\n  timestampShowFlag.value = false;\n  if (currTime <= 0) {\n    return '';\n  } else if (!prevTime || prevTime <= 0) {\n    timestampShowFlag.value = true;\n    return calculateTimestamp(currTime * 1000);\n  } else {\n    const minDiffToShow = 10 * 60; // 10min 10*60s\n    const diff = currTime - prevTime; // s\n    if (diff >= minDiffToShow) {\n      timestampShowFlag.value = true;\n      return calculateTimestamp(currTime * 1000);\n    }\n  }\n  return '';\n};\n\nwatch(\n  () => [currTime.value, prevTime.value],\n  (newVal: any, oldVal: any) => {\n    if (newVal?.toString() === oldVal?.toString()) {\n      return;\n    } else {\n      timestampShowContent.value = handleItemTime(\n        currTime.value,\n        prevTime.value,\n      );\n    }\n  },\n  {\n    immediate: true,\n  },\n);\n</script>\n<style lang=\"scss\" scoped>\n@import \"../../style/common\";\n\n.message-timestamp {\n  font-family: PingFangSC-Regular;\n  margin: 10px auto;\n  color: #999;\n  font-size: 12px;\n  overflow-wrap: anywhere;\n  display: flex;\n  align-items: center;\n  text-align: center;\n}\n</style>\n","import Component from 'D:/JAVAEE/myflies/uniapp-app/uniapp/pages-ai-desk/ai-desk-customer-uniapp/components/CustomerServiceChat/message-list/message-elements/message-timestamp.vue'\nwx.createComponent(Component)"],"names":["vue","currTime","prevTime","calculateTimestamp"],"mappings":";;;;;;;;;;;;;;;;;AAWA,UAAM,EAAE,QAAQ,KAAK,MAAA,IAAUA,4CAAAA;AAE/B,UAAM,QAAQ;AAUd,UAAM,EAAE,UAAU,SAAS,IAAI,OAAO,KAAK;AACrC,UAAA,oBAAoB,IAAI,KAAK;AAC7B,UAAA,uBAAuB,IAAI,EAAE;AAE7B,UAAA,iBAAiB,CAACC,WAAkBC,cAAqB;AAC7D,wBAAkB,QAAQ;AAC1B,UAAID,aAAY,GAAG;AACV,eAAA;AAAA,MACE,WAAA,CAACC,aAAYA,aAAY,GAAG;AACrC,0BAAkB,QAAQ;AACnB,eAAAC,6CAAA,mBAAmBF,YAAW,GAAI;AAAA,MAAA,OACpC;AACL,cAAM,gBAAgB,KAAK;AAC3B,cAAM,OAAOA,YAAWC;AACxB,YAAI,QAAQ,eAAe;AACzB,4BAAkB,QAAQ;AACnB,iBAAAC,6CAAA,mBAAmBF,YAAW,GAAI;AAAA,QAC3C;AAAA,MACF;AACO,aAAA;AAAA,IAAA;AAGT;AAAA,MACE,MAAM,CAAC,SAAS,OAAO,SAAS,KAAK;AAAA,MACrC,CAAC,QAAa,WAAgB;AAC5B,aAAI,iCAAQ,iBAAe,iCAAQ,aAAY;AAC7C;AAAA,QAAA,OACK;AACL,+BAAqB,QAAQ;AAAA,YAC3B,SAAS;AAAA,YACT,SAAS;AAAA,UAAA;AAAA,QAEb;AAAA,MACF;AAAA,MACA;AAAA,QACE,WAAW;AAAA,MACb;AAAA,IAAA;;;;;;;;;;;AC1DF,GAAG,gBAAgB,SAAS;"}