{"version":3,"file":"form-mobile.js","sources":["pages-ai-desk/ai-desk-customer-uniapp/components/CustomerServiceChat/message-list/message-elements/message-desk/message-desk-elements/message-multi-form/form-mobile.vue","E:/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RDovSkFWQUVFL215ZmxpZXMvdW5pYXBwLWFwcC91bmlhcHAvcGFnZXMtYWktZGVzay9haS1kZXNrLWN1c3RvbWVyLXVuaWFwcC9jb21wb25lbnRzL0N1c3RvbWVyU2VydmljZUNoYXQvbWVzc2FnZS1saXN0L21lc3NhZ2UtZWxlbWVudHMvbWVzc2FnZS1kZXNrL21lc3NhZ2UtZGVzay1lbGVtZW50cy9tZXNzYWdlLW11bHRpLWZvcm0vZm9ybS1tb2JpbGUudnVl"],"sourcesContent":["<template>\n\t<div>\n\t\t<div v-if=\"!finishSubmit && props.payload.nodeStatus == 0\" class=\"before-form\">\n      <Icon :src=\"iconForm\" width=\"60px\" height=\"60px\" style=\"margin:5px 4px\"/>\n      <div class=\"form-button\" @click=\"clickShowDialog\">\n        {{TUITranslateService.t(\"AIDesk.立即填写\")}}\n      </div>\n\t\t</div>\n\t\t<div class=\"edit-form\">\n      <div class=\"edit-form-item\">\n        <FormPopup\n          class=\"form-item\"\n          :show=\"showDialog\"\n          :showHeaderCloseButton=\"false\"\n          @onClose=\"closeDialog\"\n          title=\"\"\n        >\n          <div style=\"height:100%;overflow-y: auto;\">\n            <div class=\"dialog-title\">\n              <div>\n                {{ props.payload.content.tip }}\n              </div>\n                <div @click=\"closeDialog\">\n                  <Icon :src=\"iconClose\" width=\"16px\" height=\"16px\"/>\n                </div>\n            </div>\n            <div\n              v-for=\"(item, index) in props.payload.content.inputVariables\"\n              :key=\"index\"\n            >\n              <div v-if=\"!finishSubmit && item.formType == 0 && props.payload.nodeStatus == 0\">\n                <InputMobile :placeholder=\"item.placeholder\" :variableValue=\"item.variableValue\" :name=\"item.name\" :isRequired=\"item.isRequired\" @input-change=\"handleInputChange\" :validator=\"item.isRequired == 1 && isValid(item.name)\"/>\n              </div>\n              <div v-else-if=\"!finishSubmit && item.formType == 1 && props.payload.nodeStatus == 0\">\n                <RadioMobile :chooseItemList=\"item.chooseItemList\" :name=\"item.name\" :isRequired=\"item.isRequired\" @input-change=\"handleInputChange\" :validator=\"item.isRequired == 1 && isValid(item.name)\"/>\n              </div>\n              <div v-else class=\"variable-value-container-mobile\">\n                <div style=\"width:70px\">\n                  {{ item.name }}\n                </div>\n                <div>\n                 {{ item.variableValue == '' ||  item.variableValue == null ? mapValue[item.name] : item.variableValue}}\n                </div>\n              </div>\n            </div>\n            <div class=\"button-container\" v-if=\"!finishSubmit && props.payload.nodeStatus == 0\">\n              <div class=\"button\" @click=\"handleSendForm\">\n                {{ TUITranslateService.t(\"AIDesk.提交\") }}\n              </div>\n            </div>\n          </div>\n        </FormPopup>\n      </div>\n\t\t</div>\n\t\t<div v-if=\"finishSubmit || props.payload.nodeStatus != 0\" class=\"before-form\">\n      <div class=\"icon-container\">\n        <Icon class=\"form-icon\" :src=\"iconForm\" width=\"60px\" height=\"60px\" style=\"margin:5px 4px\"/>\n        <Icon v-if=\"finishSubmit || props.payload.nodeStatus == 2\" class=\"form-icon-check\" width=\"26px\" height=\"26px\" :src=\"iconFormFilled\"/>\n      </div>\n      <div class=\"form-button\" @click=\"clickShowDialog\">\n        {{ TUITranslateService.t(\"AIDesk.查看内容\") }}\n      </div>\n\t\t</div>\n\t</div>\n\n</template>\n<script lang=\"ts\">\nimport vue from '../../../../../../../adapter-vue';\nimport { customerServicePayloadType } from '../../../../../../../interface';\nimport iconForm from '../../../../../../../assets/icon_form.png';\nimport iconFormFilled from '../../../../../../../assets/icon_form_filled.png';\nimport iconClose from '../../../../../../../assets/dialog-close.png';\nimport Icon from '../customer-icon.vue';\nimport InputMobile from './component-mobile/input-mobile.vue';\nimport RadioMobile from './component-mobile/radios-mobile.vue';\nimport LabelMobile from './component-mobile/label-mobile.vue';\nimport FormPopup from './component-mobile/form-popup.vue';\nimport { CUSTOM_MESSAGE_SRC } from '../../../../../../../constant';\nimport {TUITranslateService} from '@tencentcloud/chat-uikit-engine';\n\nconst { ref , onMounted,computed} = vue;\ninterface Props {\n  payload: customerServicePayloadType;\n}\nexport default {\n  components:{\n    Icon,\n    InputMobile,\n    RadioMobile,\n    FormPopup,\n    LabelMobile\n  },\n  props: {\n    payload: {\n      type: Object as () => customerServicePayloadType,\n      default: () => ({}),\n    },\n  },\n  options:{\n    styleIsolation: 'apply-shared'\n  },\n  emits: ['sendMessage','showFormPopup'],\n  setup(props: Props, { emit }) {\n    const showDialog = ref<boolean>(false);\n    const mapValue=ref({});\n    const isSubmit = ref<boolean>(false);\n    const finishSubmit = ref<boolean>(false);\n    const hasNullValue = ref<boolean>(true);\n    onMounted(()=>{\n      let inputVariables = props.payload.content.inputVariables ?? [];\n      for(let i=0;i<inputVariables.length;i++){\n          const name = inputVariables[i].name;\n          const variableValue = inputVariables[i].variableValue;\n          mapValue.value[name]=variableValue;\n      }\n\n    });\n    const clickShowDialog = ()=>{\n        showDialog.value = true;\n        emit('showFormPopup',true);\n    }\n\n    const closeDialog=()=>{\n        showDialog.value = false;\n        emit('showFormPopup',false);\n    }\n\n    const checkValidator = (name:string) => {\n        hasNullValue.value = false;\n        if(isSubmit.value == true){\n            if(mapValue.value[name] == null || mapValue.value[name] == ''){\n                hasNullValue.value = true;\n                return true;\n\n            }\n        }\n        return false;\n    }\n\n    const isValid = (name:string) => {\n        return isSubmit.value && (mapValue.value[name] == null || mapValue.value[name] == '' || mapValue.value[name] == undefined)\n    }\n\n    const handleSendForm = (data: any) => {\n        isSubmit.value = true;\n        let list = props.payload.content.inputVariables;\n        for(let i=0;i<list.length;i++){\n            let value = mapValue.value[list[i].name];\n            if(value !='' && value != null){\n                list[i].variableValue = value;\n            }else {\n                if(list[i].isRequired === 1  && checkValidator(list[i].name)){\n                    return;\n                }\n            }\n        }\n        const submitData = {\n            data: JSON.stringify({\n                src: CUSTOM_MESSAGE_SRC.MULTI_FORM,\n                content: {\n\t\t            inputVariables: list\n\t            },\n                customerServicePlugin: 0,\n        }),\n        };\n        emit('sendMessage', submitData);\n        finishSubmit.value = true;\n        isSubmit.value = false;\n    };\n    const handleInputChange = ({name,value}) =>{\n        mapValue.value[name] = value;\n    }\n\n    const showValue = (name:string,variableValue:string) => {\n        if(variableValue != null && variableValue != ''){\n                return variableValue\n        }\n        return mapValue.value[name];\n    }\n    return {\n      props,\n      iconForm,\n      iconFormFilled,\n      showDialog,\n      clickShowDialog,\n      iconClose,\n      checkValidator,\n      finishSubmit,\n      showValue,\n      mapValue,\n      isSubmit,\n      handleInputChange,\n      handleSendForm,\n      closeDialog,\n      isValid,\n      TUITranslateService\n    }\n  }\n}\n</script>\n<style lang=\"scss\">\n@import \"../styles/common.scss\";\n.before-form {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  .form-button {\n    display: flex;\n    justify-content: center;\n    width: 66px;\n    padding: 6px 10px;\n    background-color: #1c66e5;\n    color: white;\n    border-radius: 20px;\n  }\n  .icon-container {\n    position:relative;\n    .form-icon-check {\n      position: absolute;\n      right: 15px;\n      bottom: 6px;\n    }\n  }\n}\n\n.edit-form {\n  flex:1;\n  @include flex(column,flex-start,stretch);\n  .edit-form-item {\n    @include flex(row, flex-start, center);\n    // min-height: 54px;\n    .form-item {\n      @include flex(row, flex-start, stretch);\n      flex: none;\n      .form-item-input {\n        padding: 14px 10px;\n        font-size: 16px;\n        border: 0px;\n        background-color: rgba(248, 248, 248, 1);\n      }\n    }\n  }\n}\n\n.dialog-title {\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  padding: 20px;\n  font-size: 16px;\n  font-weight: 500;\n  .dialog-close {\n    color: rgba(153,153,153,1);\n  }\n}\n.variable-value-container-mobile {\n  padding: 16px;\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  border-bottom: 1px solid #e7e7e7;\n}\n.button-container {\n  display: flex;\n  justify-content: center;\n  margin: 15px;\n  .button {\n    display:flex;\n    justify-content: center;\n    width: 87px;\n    padding: 6px 10px;\n    background-color: #1c66e5;\n    color: white;\n    border-radius: 20px;\n  }\n}\n</style>\n","import Component from 'D:/JAVAEE/myflies/uniapp-app/uniapp/pages-ai-desk/ai-desk-customer-uniapp/components/CustomerServiceChat/message-list/message-elements/message-desk/message-desk-elements/message-multi-form/form-mobile.vue'\nwx.createComponent(Component)"],"names":["vue","CUSTOM_MESSAGE_SRC","iconForm","iconFormFilled","iconClose","TUITranslateService"],"mappings":"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"}