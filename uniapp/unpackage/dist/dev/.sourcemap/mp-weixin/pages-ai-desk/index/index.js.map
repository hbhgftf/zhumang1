{"version":3,"file":"index.js","sources":["pages-ai-desk/index/index.vue","E:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMtYWktZGVza1xpbmRleFxpbmRleC52dWU"],"sourcesContent":["<template>\r\n  <view class=\"chat-container\">\r\n    <TUIKit\r\n      :config=\"simpleConfig\"\r\n      :userID=\"userID\"\r\n      :userSig=\"userSig\"\r\n      @onMessageReceived=\"onMessageReceived\"\r\n      @onConversationListUpdated=\"onConversationListUpdated\"\r\n      @onError=\"onError\"\r\n    />\r\n  </view>\r\n</template>\r\n\r\n<script>\r\nimport { genTestUserSig } from '../../debug/GenerateTestUserSig.js';\r\n// Import TUIKit component\r\nimport TUIKit from '../ai-desk-customer-uniapp/components/CustomerServiceChat/index-uniapp.vue'; // Corrected import path\r\n// Import TUICustomerServer\r\nimport TUICustomerServer from '../ai-desk-customer-uniapp/index';\r\n\r\nexport default {\r\n  components: {\r\n    TUIKit // Register TUIKit component\r\n  },\r\n  data() {\r\n    return {\r\n      userID: 'customer_' + Math.floor(Math.random() * 1000000), // 生成随机用户ID\r\n      // 简化的 config\r\n      simpleConfig: {\r\n        sdkAppID: 1600089018, // 使用您的SDKAppID\r\n        groupID: '59887', // 添加客服群组ID\r\n        // 暂时移除其他配置\r\n      }\r\n    };\r\n  },\r\n  computed: {\r\n    userSig() {\r\n      return genTestUserSig(this.userID).userSig;\r\n    }\r\n  },\r\n  methods: {\r\n    // 收到新消息时的回调\r\n    onMessageReceived(message) {\r\n      console.log('收到新消息:', message);\r\n      // 震动提醒\r\n      uni.vibrateShort();\r\n\r\n      // 播放提示音\r\n      const innerAudioContext = uni.createInnerAudioContext();\r\n      innerAudioContext.src = '/static/notification.mp3';\r\n      innerAudioContext.play();\r\n    },\r\n\r\n    // 会话列表更新时的回调\r\n    onConversationListUpdated(conversationList) {\r\n      console.log('会话列表更新:', conversationList);\r\n    },\r\n\r\n    // 错误处理\r\n    onError(error) {\r\n      console.error('TUIKit错误:', error);\r\n      uni.showToast({\r\n        title: '连接异常，请稍后重试',\r\n        icon: 'none',\r\n        duration: 2000\r\n      });\r\n    }\r\n  },\r\n  onLoad() {\r\n    // 页面加载时的初始化逻辑\r\n    console.log('聊天页面已加载');\r\n\r\n    // Initialize and login IM SDK\r\n    TUICustomerServer.initWithProfile({\r\n      SDKAppID: this.simpleConfig.sdkAppID,\r\n      userID: this.userID,\r\n      userSig: this.userSig,\r\n    });\r\n\r\n    // 检查网络状态\r\n    uni.getNetworkType({\r\n      success: (res) => {\r\n        if (res.networkType === 'none') {\r\n          uni.showToast({\r\n            title: '网络连接已断开',\r\n            icon: 'none',\r\n            duration: 2000\r\n          });\r\n        }\r\n      }\r\n    });\r\n  },\r\n  onUnload() {\r\n    // 页面卸载时的清理工作\r\n    console.log('聊天页面已卸载');\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.chat-container {\r\n  width: 100%;\r\n  height: 100vh;\r\n  display: flex;\r\n  flex-direction: column;\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n/* 自定义样式 */\r\n:deep(.tui-chat-input) {\r\n  background-color: #ffffff;\r\n  border-top: 1px solid #e5e5e5;\r\n}\r\n\r\n:deep(.tui-message-list) {\r\n  background-color: #f5f5f5;\r\n  padding: 10rpx;\r\n}\r\n\r\n:deep(.tui-message-item) {\r\n  margin: 10rpx 0;\r\n}\r\n\r\n:deep(.tui-message-content) {\r\n  max-width: 70%;\r\n  border-radius: 8rpx;\r\n}\r\n\r\n:deep(.tui-message-sender) {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n}\r\n\r\n:deep(.tui-message-time) {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n}\r\n\r\n:deep(.tui-message-status) {\r\n  font-size: 24rpx;\r\n  color: #999;\r\n}\r\n\r\n/* 客服相关样式 */\r\n:deep(.tui-customer-service) {\r\n  background-color: #ffffff;\r\n  border-radius: 8rpx;\r\n  padding: 20rpx;\r\n  margin: 10rpx;\r\n}\r\n\r\n:deep(.tui-customer-service-title) {\r\n  font-size: 28rpx;\r\n  color: #333;\r\n  font-weight: bold;\r\n}\r\n\r\n:deep(.tui-customer-service-content) {\r\n  font-size: 26rpx;\r\n  color: #666;\r\n  margin-top: 10rpx;\r\n}\r\n</style> ","import MiniProgramPage from 'D:/JAVAEE/myflies/uniapp-app/uniapp/pages-ai-desk/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["genTestUserSig","uni","TUICustomerServer"],"mappings":";;;;AAgBA,MAAK,SAAU,MAAW;AAI1B,MAAK,YAAU;AAAA,EACb,YAAY;AAAA,IACV;AAAA;AAAA,EACD;AAAA,EACD,OAAO;AACL,WAAO;AAAA,MACL,QAAQ,cAAc,KAAK,MAAM,KAAK,OAAO,IAAI,GAAO;AAAA;AAAA;AAAA,MAExD,cAAc;AAAA,QACZ,UAAU;AAAA;AAAA,QACV,SAAS;AAAA;AAAA;AAAA,MAEX;AAAA;EAEH;AAAA,EACD,UAAU;AAAA,IACR,UAAU;AACR,aAAOA,yCAAe,KAAK,MAAM,EAAE;AAAA,IACrC;AAAA,EACD;AAAA,EACD,SAAS;AAAA;AAAA,IAEP,kBAAkB,SAAS;AACzBC,8EAAY,UAAU,OAAO;AAE7BA,oBAAG,MAAC,aAAY;AAGhB,YAAM,oBAAoBA,oBAAI;AAC9B,wBAAkB,MAAM;AACxB,wBAAkB,KAAI;AAAA,IACvB;AAAA;AAAA,IAGD,0BAA0B,kBAAkB;AAC1CA,oBAAY,MAAA,MAAA,OAAA,uCAAA,WAAW,gBAAgB;AAAA,IACxC;AAAA;AAAA,IAGD,QAAQ,OAAO;AACbA,oBAAc,MAAA,MAAA,SAAA,uCAAA,aAAa,KAAK;AAChCA,oBAAAA,MAAI,UAAU;AAAA,QACZ,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAAA,EACD;AAAA,EACD,SAAS;AAEPA,kBAAAA,MAAA,MAAA,OAAA,uCAAY,SAAS;AAGrBC,2CAAAA,kBAAkB,gBAAgB;AAAA,MAChC,UAAU,KAAK,aAAa;AAAA,MAC5B,QAAQ,KAAK;AAAA,MACb,SAAS,KAAK;AAAA,IAChB,CAAC;AAGDD,kBAAAA,MAAI,eAAe;AAAA,MACjB,SAAS,CAAC,QAAQ;AAChB,YAAI,IAAI,gBAAgB,QAAQ;AAC9BA,wBAAAA,MAAI,UAAU;AAAA,YACZ,OAAO;AAAA,YACP,MAAM;AAAA,YACN,UAAU;AAAA,UACZ,CAAC;AAAA,QACH;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACF;AAAA,EACD,WAAW;AAETA,kBAAAA,MAAA,MAAA,OAAA,uCAAY,SAAS;AAAA,EACvB;AACF;;;;;;;;;;;;;;;;;;AC/FA,GAAG,WAAW,eAAe;"}